<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI画像/動画プロンプトメーカー（Grok連携）</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 400px; margin: auto; }
        input, textarea, select { width: 100%; padding: 8px; margin: 5px 0; box-sizing: border-box; }
        button { background: #007bff; color: white; padding: 10px; border: none; width: 100%; cursor: pointer; margin: 5px 0; }
        button:hover { background: #0056b3; }
        #output { border: 1px solid #ccc; min-height: 100px; }
        .grok-link { background: #28a745; }
        .section { margin: 10px 0; border: 1px solid #ddd; padding: 10px; border-radius: 5px; }
        label { font-size: 12px; color: #666; display: block; margin-top: 5px; }
        .checkbox { width: auto; margin: 5px 0; }
    </style>
</head>
<body>
    <h1>AIプロンプトメーカー（Grok連携）</h1>
    <p>日本語入力OK！ 自動英語変換で生成最適化</p>
    
    <div class="section">
        <h3>基本（必須）</h3>
        <label>主題: </label>
        <input type="text" id="subject" placeholder="例: 猫娘 かわいい" />
        <label>スタイル: </label>
        <select id="style">
            <option value="">ランダム</option>
            <option value="realistic">realistic (リアル)</option>
            <option value="anime">anime (アニメ)</option>
            <option value="cartoon">cartoon (カートゥーン)</option>
            <option value="fantasy">fantasy (ファンタジー)</option>
        </select>
        <label>ムード: </label>
        <select id="mood">
            <option value="">ランダム</option>
            <option value="warm">warm (温かみ)</option>
            <option value="cool">cool (クール)</option>
            <option value="mysterious">mysterious (神秘的)</option>
        </select>
    </div>
    
    <div class="section">
        <h3>キャラ詳細（オプション）</h3>
        <label>年齢: </label>
        <select id="age">
            <option value="">指定なし</option>
            <option value="young">young (若い)</option>
            <option value="adult">adult (大人)</option>
            <option value="elderly">elderly (老人)</option>
        </select>
        <label>肌の色: </label>
        <select id="skin">
            <option value="">指定なし</option>
            <option value="fair">fair (色白)</option>
            <option value="tan">tan (小麦)</option>
            <option value="dark">dark (暗め)</option>
        </select>
        <label>髪色: </label>
        <input type="text" id="hair" placeholder="例: 青い髪" />
        <label>髪型: </label>
        <select id="hairstyle">
            <option value="">指定なし</option>
            <option value="long straight">long straight (ロングストレート)</option>
            <option value="curly">curly (カーリー)</option>
            <option value="short bob">short bob (ショートボブ)</option>
            <option value="ponytail">ponytail (ポニーテール)</option>
            <option value="braids">braids (三つ編み)</option>
            <option value="wavy">wavy (ウェーブ)</option>
            <option value="messy">messy (無造作)</option>
        </select>
        <label>目の色: </label>
        <input type="text" id="eyes" placeholder="例: 緑の目" />
        <label>服装: </label>
        <input type="text" id="clothing" placeholder="例: ドレス" />
        <label>ポーズ: </label>
        <select id="pose">
            <option value="">指定なし</option>
            <option value="standing">standing (立っている)</option>
            <option value="sitting">sitting (座っている)</option>
            <option value="dynamic">dynamic (ダイナミック)</option>
        </select>
    </div>
    
    <div class="section">
        <h3>背景/品質（オプション）</h3>
        <label>季節の行事: </label>
        <select id="seasonal">
            <option value="">指定なし</option>
            <option value="christmas">Christmas (クリスマス)</option>
            <option value="halloween">Halloween (ハロウィン)</option>
            <option value="newyear">New Year (お正月)</option>
            <option value="cherryblossom">Cherry Blossom (桜)</option>
            <option value="summerfestival">Summer Festival (夏祭り)</option>
            <option value="autumnleaves">Autumn Leaves (紅葉)</option>
            <option value="valentines">Valentine's Day (バレンタイン)</option>
        </select>
        <label>背景: </label>
        <input type="text" id="background" placeholder="例: 森" />
        <label>照明: </label>
        <select id="lighting">
            <option value="">指定なし</option>
            <option value="soft">soft (柔らか)</option>
            <option value="dramatic">dramatic (劇的)</option>
            <option value="natural">natural (自然)</option>
        </select>
        <label>詳細度: </label>
        <select id="detail">
            <option value="">標準</option>
            <option value="high">high (高詳細)</option>
            <option value="low">low (低詳細)</option>
        </select>
        <label>解像度: </label>
        <select id="resolution">
            <option value="">標準</option>
            <option value="4k">4K (高解像)</option>
            <option value="hd">HD (標準)</option>
        </select>
    </div>
    
    <div class="section">
        <h3>動画オプション（動画モード時）</h3>
        <label>モード: </label>
        <select id="mode">
            <option value="image">画像</option>
            <option value="video">動画</option>
        </select>
        <label>カメラワーク: </label>
        <select id="camera">
            <option value="">ランダム</option>
            <option value="close-up">close-up (クローズアップ)</option>
            <option value="wide shot">wide shot (ワイドショット)</option>
            <option value="tracking shot">tracking shot (トラッキングショット)</option>
            <option value="aerial view">aerial view (空中ショット)</option>
            <option value="slow pan">slow pan (スローパン)</option>
            <option value="quick cut">quick cut (クイックカット)</option>
        </select>
        <label>動作: </label>
        <select id="action">
            <option value="">ランダム</option>
            <option value="standing">standing (立っている)</option>
            <option value="walking">walking (歩いている)</option>
            <option value="jumping">jumping (ジャンプ)</option>
            <option value="smiling">smiling (微笑む)</option>
            <option value="dancing">dancing (ダンス)</option>
            <option value="fighting">fighting (戦う)</option>
        </select>
    </div>
    
    <label class="checkbox">
        <input type="checkbox" id="openGrok" checked> Grokページを開く（OFFで出力&コピーだけ）
    </label>
    
    <button id="generateBtn">Grokに送る（生成+開く）</button>
    <textarea id="output" placeholder="ここに最適プロンプトが出力..."></textarea>
    <button class="grok-link" id="openGrokBtn">Grokページだけ開く</button>

    <script>
        function generatePrompt(subject, style, mood, age, skin, hair, hairstyle, eyes, clothing, pose, seasonal, background, lighting, detail, resolution, mode, camera, action) {
            try {
                const translations = {
                    '猫娘': 'detailed cat girl with ears and tail',
                    '猫': 'cat', '女': 'girl',
                    '犬': 'dog', 'うさぎ': 'rabbit', 'エルフ': 'elf with pointed ears',
                    'かわいい': 'cute and whimsical', '怖い': 'scary and eerie', '美しい': 'beautiful and elegant', '楽しい': 'fun and lively', '静かな': 'peaceful and serene',
                    '青い髪': 'blue hair', '赤い髪': 'red hair', '黒髪': 'black hair', '金髪': 'blonde hair',
                    '緑の目': 'green eyes', '青い目': 'blue eyes', '赤い目': 'red eyes', '目': 'eyes',
                    'ドレス': 'flowing dress', 'スーツ': 'sharp suit', '鎧': 'intricate armor',
                    '森': 'enchanted forest', '海': 'serene ocean', '街': 'bustling city', '未来': 'futuristic cityscape', 'ファンタジー': 'fantasy realm', '冒険': 'adventurous landscape',
                    'クリスマス': 'Christmas', 'ハロウィン': 'Halloween', 'お正月': 'New Year', '桜': 'Cherry Blossom', '夏祭り': 'Summer Festival', '紅葉': 'Autumn Leaves', 'バレンタイン': "Valentine's Day",
                    'ロングストレート': 'long straight', 'カーリー': 'curly', 'ショートボブ': 'short bob', 'ポニーテール': 'ponytail', '三つ編み': 'braids', 'ウェーブ': 'wavy', '無造作': 'messy'
                };

                function translateInput(input, translations) {
                    if (!input) return input;
                    const words = input.split(/\s+/);
                    let translated = words.map(word => {
                        for (let key in translations) {
                            if (word.includes(key)) {
                                word = word.replace(key, translations[key]);
                                break;
                            }
                        }
                        return word;
                    }).join(' ');
                    return translated;
                }

                subject = translateInput(subject, translations);
                hair = translateInput(hair, translations);
                eyes = translateInput(eyes, translations);
                clothing = translateInput(clothing, translations);
                background = translateInput(background, translations);
                seasonal = translateInput(seasonal, translations);

                let basePrompt = "Create a {style} image of a highly detailed {subject} as the main focus";
                if (mood) basePrompt += " in a {mood} mood";
                basePrompt += ". ";

                let charDetails = [];
                if (age) charDetails.push(age);
                if (skin) charDetails.push(`${skin} skin`);
                if (hair) charDetails.push(`${hair} hair`);
                if (hairstyle) charDetails.push(`${hairstyle} hairstyle`);
                if (eyes) charDetails.push(`${eyes} eyes`);
                if (clothing) charDetails.push(`wearing ${clothing}`);
                if (pose) charDetails.push(`in a ${pose} pose`);
                if (charDetails.length > 0) {
                    basePrompt += ' featuring ' + charDetails.join(', ') + '. ';
                }

                let addDetails = [];
                if (seasonal) {
                    addDetails.push(`in a ${seasonal} setting`);
                }
                if (background && !seasonal) addDetails.push(`in a ${background} background`);
                if (lighting) addDetails.push(`with ${lighting} lighting`);
                if (detail === 'high') addDetails.push('high detail');
                if (detail === 'low') addDetails.push('low detail');
                if (resolution === '4k') addDetails.push('in 4K resolution');
                if (resolution === 'hd') addDetails.push('in HD');
                if (addDetails.length > 0) {
                    basePrompt += ' ' + addDetails.join(', ') + '. ';
                }

                basePrompt += "Use vibrant colors, sharp focus, and professional composition.";

                const styles = ['realistic', 'anime', 'cartoon'];
                const moods = ['warm', 'cool', 'mysterious'];
                let finalStyle = style || styles[Math.floor(Math.random() * styles.length)];
                let finalMood = mood || moods[Math.floor(Math.random() * moods.length)];

                let prompt = basePrompt
                    .replace('{style}', finalStyle)
                    .replace('{subject}', subject)
                    .replace('{mood}', finalMood);

                // 動画モード
                if (mode === 'video') {
                    let videoDetails = [];
                    if (camera) videoDetails.push(`${camera} camera work`);
                    if (action) videoDetails.push(`${action} action`);
                    if (videoDetails.length > 0) {
                        prompt = "Create a short video of " + prompt + " with " + videoDetails.join(' and ') + ". Smooth animation, high quality 4K.";
                    } else {
                        prompt = "Create a short video of " + prompt + ". Smooth animation, high quality 4K.";
                    }
                }

                // 残り日本語除去
                prompt = prompt.replace(/[\u3040-\u309F\u3400-\u4DBF\u4E00-\u9FFF]/g, '');
                prompt = prompt.replace(/\s+/g, ' ');

                return prompt;
            } catch (e) {
                return 'エラーが発生しました。キーワードをシンプルに試してね！';
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('プロンプトをコピーしました！ Grokに貼り付けてね。');
            }).catch(() => {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('コピーOK！');
            });
        }

        function openGrokDirectly() {
            window.open('https://x.com/grok', '_blank');
        }

        function generateAndOpenGrok() {
            const subject = document.getElementById('subject').value.trim();
            const style = document.getElementById('style').value;
            const mood = document.getElementById('mood').value;
            const age = document.getElementById('age').value;
            const skin = document.getElementById('skin').value;
            const hair = document.getElementById('hair').value;
            const hairstyle = document.getElementById('hairstyle').value;
            const eyes = document.getElementById('eyes').value;
            const clothing = document.getElementById('clothing').value;
            const pose = document.getElementById('pose').value;
            const seasonal = document.getElementById('seasonal').value;
            const background = document.getElementById('background').value;
            const lighting = document.getElementById('lighting').value;
            const detail = document.getElementById('detail').value;
            const resolution = document.getElementById('resolution').value;
            const mode = document.getElementById('mode').value;
            const camera = document.getElementById('camera').value;
            const action = document.getElementById('action').value;
            const openGrok = document.getElementById('openGrok').checked;

            if (!subject) {
                alert('主題を入れて！');
                return;
            }

            const prompt = generatePrompt(subject, style, mood, age, skin, hair, hairstyle, eyes, clothing, pose, seasonal, background, lighting, detail, resolution, mode, camera, action);
            document.getElementById('output').value = prompt;
            copyToClipboard(prompt);
            if (openGrok) {
                openGrokDirectly();
            }
        }

        // イベント追加
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('generateBtn').addEventListener('click', generateAndOpenGrok);
            document.getElementById('openGrokBtn').addEventListener('click', openGrokDirectly);
        });
    </script>
</body>
</html>
